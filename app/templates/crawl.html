{% extends "base.html" %}
{% set active_page = "overview" %}

{%- block extrahead %}

{% for script in scripts %}
 {{ script | safe }}
{% endfor %}

<script>
$( document ).ready(function() {
    $('[data-toggle="tooltip"]').tooltip();
</script>

{% endblock %}

{% block content %}
{% include 'sidebar.html' %}
<div class='row'>
  <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
    <h1>{{ crawl.name }} <small>({{ crawl.crawler }})</small>
    {% if config.DEMO %}

          <button id="playButton" title="Start Crawl" type="button" class="btn btn-control"
            data-container="body" disabled data-toggle="tooltip" data-placement="bottom">
              <i class="fa fa-play"></i>
          </button>
          <button id="stopButton" title="Stop Crawl" type="button" class="btn btn-control"
            data-container="body" disabled data-toggle="tooltip" data-placement="bottom">
              <span class="fa fa-stop"></span>
          </button>

        {% else %}

          <button id="playButton" title="Start Crawl" type="button" class="btn btn-control"
            data-container="body"
              {% if crawl.crawler == "ache" and crawl.status == "Running crawl" or crawl.status == "Crawl was stopped" %}
                disabled
              {% endif %}
            data-toggle="tooltip" data-placement="bottom">
              <i class="fa fa-play"></i>
          </button>
          <button id="stopButton" title="Stop Crawl" type="button" class="btn btn-control"
            data-container="body"
              {% if crawl.crawler == "ache" and crawl.status != "Running crawl" %}
                disabled
              {% endif %}
            data-toggle="tooltip" data-placement="bottom">
              <span class="fa fa-stop"></span>
          </button>


        {% endif %}

    </h1>
        <h3>Status: <small><span id="status">{{ crawl.status }}</span></small></h3>
        <table>
            <tr>
              <th class="table-blue">Description</th>
              <td>{{crawl.description}}</td>
            </tr>
            {% if crawl.crawler == 'ache' %}
            <tr>
              <th class="table-blue">Crawl Model</th>
              <td>{{ model.name }}</td>
            </tr>
            {% endif %}
        </table>
        <table id="stats-data">
        {% if crawl.crawler == "nutch" %}
          <tr><th class="table-blue">Sites crawled</th>
            <td>{{ crawl.pages_crawled }}</td>
          </tr>
        {% else %}
          <tr><th class="table-blue">Sites crawled</th>
            <td>{{ crawl.pages_crawled }}</td>
          </tr>
          <tr><th class="table-blue">Harvest rate</th>
           <td>{{ crawl.harvest_rate }}</td>
          </tr>

        {% endif %}
        </table>

        {% if crawl.crawler == 'ache' and divs %}
        <a class="btn btn-default btn-padded center"
        href="{{ url_for('relevant_pages', project_slug=project.slug, crawl_slug=crawl.slug) }}">
        Download Relevant Pages</a>
        {% endif %}

    </div>


  <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
    {% if divs %}
    {% for div in divs %}
        <div class='col-sm-6'>
            {{ div | safe }}
        </div>
    {% endfor %}
   {% endif %}
  </div>

</div>
{% endblock content %}
